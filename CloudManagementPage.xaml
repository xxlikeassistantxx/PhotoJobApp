<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="PhotoJobApp.CloudManagementPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="â˜ï¸ Cloud Management"
             BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}">

    <Grid RowDefinitions="Auto,*,Auto" Padding="20">
        
        <!-- Header -->
        <VerticalStackLayout Grid.Row="0" Spacing="10">
            <Label Text="Cloud Storage Management" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" />
            <Label Text="View and manage your cloud files" 
                   FontSize="14" 
                   TextColor="Gray" 
                   HorizontalOptions="Center" />
        </VerticalStackLayout>

        <!-- Content -->
        <ScrollView Grid.Row="1" Margin="0,20,0,0">
            <VerticalStackLayout Spacing="20">
                
                <!-- Job Types Section -->
                <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="ðŸ“‹ Job Types in Cloud" 
                               FontSize="18" 
                               FontAttributes="Bold" />
                        
                        <ActivityIndicator x:Name="JobTypesLoadingIndicator" 
                                          IsRunning="False" 
                                          IsVisible="False" />
                        
                        <CollectionView x:Name="JobTypesCollectionView" 
                                       ItemsSource="{Binding CloudJobTypes}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Frame Margin="0,5" Padding="10" BorderColor="Blue" CornerRadius="8">
                                        <Grid ColumnDefinitions="*,Auto">
                                            <VerticalStackLayout Grid.Column="0" Spacing="5">
                                                <Label Text="{Binding Name}" 
                                                       FontAttributes="Bold" 
                                                       TextColor="Blue" />
                                                <Label Text="{Binding Description}" 
                                                       FontSize="12" 
                                                       TextColor="Gray" />
                                                <Label Text="{Binding CloudId}" 
                                                       FontSize="10" 
                                                       TextColor="DarkGray" />
                                            </VerticalStackLayout>
                                            <Button Grid.Column="1" 
                                                    Text="ðŸ—‘ï¸" 
                                                    BackgroundColor="Red" 
                                                    TextColor="White"
                                                    CornerRadius="20"
                                                    WidthRequest="40"
                                                    HeightRequest="40"
                                                    Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=DeleteJobTypeCommand}"
                                                    CommandParameter="{Binding}" />
                                        </Grid>
                                    </Frame>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                        
                        <Label x:Name="NoJobTypesLabel" 
                               Text="No job types in cloud" 
                               IsVisible="False"
                               HorizontalOptions="Center"
                               TextColor="Gray" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Individual Jobs Section -->
                <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="ðŸ“¸ Individual Jobs in Cloud" 
                               FontSize="18" 
                               FontAttributes="Bold" />
                        
                        <ActivityIndicator x:Name="JobsLoadingIndicator" 
                                          IsRunning="False" 
                                          IsVisible="False" />
                        
                        <CollectionView x:Name="JobsCollectionView" 
                                       ItemsSource="{Binding CloudJobs}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Frame Margin="0,5" Padding="10" BorderColor="LightGreen" CornerRadius="8">
                                        <Grid ColumnDefinitions="*,Auto">
                                            <VerticalStackLayout Grid.Column="0" Spacing="5">
                                                <Label Text="{Binding Title}" 
                                                       FontAttributes="Bold" />
                                                <Label Text="{Binding Status}" 
                                                       FontSize="12" 
                                                       TextColor="Gray" />
                                                <Label Text="{Binding CreatedDate, StringFormat='Created: {0:MM/dd/yyyy}'}" 
                                                       FontSize="10" 
                                                       TextColor="DarkGray" />
                                            </VerticalStackLayout>
                                            <Button Grid.Column="1" 
                                                    Text="ðŸ—‘ï¸" 
                                                    BackgroundColor="Red" 
                                                    TextColor="White"
                                                    CornerRadius="20"
                                                    WidthRequest="40"
                                                    HeightRequest="40"
                                                    Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=DeleteJobCommand}"
                                                    CommandParameter="{Binding}" />
                                        </Grid>
                                    </Frame>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                        
                        <Label x:Name="NoJobsLabel" 
                               Text="No individual jobs in cloud" 
                               IsVisible="False"
                               HorizontalOptions="Center"
                               TextColor="Gray" />
                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Action Buttons -->
        <VerticalStackLayout Grid.Row="2" Spacing="10" Margin="0,20,0,0">
            <Button Text="ðŸ”„ Refresh Cloud Data" 
                    Command="{Binding RefreshCommand}"
                    BackgroundColor="{StaticResource Primary}"
                    TextColor="White"
                    CornerRadius="10" />
            
            <Button Text="ðŸ“¤ Push All Local to Cloud" 
                    Command="{Binding PushAllCommand}"
                    BackgroundColor="Green"
                    TextColor="White"
                    CornerRadius="10" />
            
            <Button Text="ðŸ“¥ Pull All from Cloud" 
                    Command="{Binding PullAllCommand}"
                    BackgroundColor="Blue"
                    TextColor="White"
                    CornerRadius="10" />
        </VerticalStackLayout>

    </Grid>

</ContentPage> 
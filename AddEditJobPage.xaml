<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PhotoJobApp.AddEditJobPage"
             Title="Add/Edit Job">

    <ScrollView>
        <StackLayout Padding="20" Spacing="15">
            <!-- Title -->
            <Label Text="Job Title *" Style="{StaticResource SubHeadline}"/>
            <Entry x:Name="TitleEntry" Placeholder="Enter job title" Text="{Binding Job.Title}"/>

            <!-- Description -->
            <Label Text="Description" Style="{StaticResource SubHeadline}"/>
            <Editor x:Name="DescriptionEditor" Placeholder="Enter job description" 
                    Text="{Binding Job.Description}" HeightRequest="80"/>

            <!-- Client Information -->
            <Label Text="Client Information" Style="{StaticResource SubHeadline}"/>
            <Entry x:Name="ClientNameEntry" Placeholder="Client name *" Text="{Binding Job.ClientName}"/>
            <Entry x:Name="ClientPhoneEntry" Placeholder="Phone number" Text="{Binding Job.ClientPhone}" Keyboard="Telephone"/>
            <Entry x:Name="ClientEmailEntry" Placeholder="Email address" Text="{Binding Job.ClientEmail}" Keyboard="Email"/>

            <!-- Price -->
            <Label Text="Price *" Style="{StaticResource SubHeadline}"/>
            <Entry x:Name="PriceEntry" Placeholder="0.00" Text="{Binding Job.Price}" Keyboard="Numeric"/>

            <!-- Status -->
            <Label Text="Status *" Style="{StaticResource SubHeadline}"/>
            <Picker x:Name="StatusPicker" Title="Select status" />

            <!-- Dates -->
            <Label Text="Due Date" Style="{StaticResource SubHeadline}"/>
            <DatePicker x:Name="DueDatePicker" Date="{Binding Job.DueDate}"/>

            <!-- Location -->
            <Label Text="Location" Style="{StaticResource SubHeadline}"/>
            <Entry x:Name="LocationEntry" Placeholder="Job location" Text="{Binding Job.Location}"/>

            <!-- Photos -->
            <Label Text="Photos" Style="{StaticResource SubHeadline}"/>
            <Frame Padding="15" CornerRadius="10" BackgroundColor="LightGray">
                <StackLayout>
                    <Button Text="ðŸ“· Add Photo (Camera/Gallery)" 
                            Clicked="OnAddPhotoClicked"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="White"
                            CornerRadius="5"/>
                    <CollectionView x:Name="PhotosCollectionView" 
                                   ItemsSource="{Binding Photos}"
                                   HeightRequest="200"
                                   Margin="0,10,0,0">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Margin="5" Padding="5" CornerRadius="5" BackgroundColor="White">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <Image Grid.Column="0" Source="{Binding}" HeightRequest="80" Aspect="AspectFill"/>
                                        <Button Grid.Column="1" Text="âŒ" 
                                                Clicked="OnRemovePhotoClicked" 
                                                CommandParameter="{Binding}"
                                                BackgroundColor="Red"
                                                TextColor="White"
                                                WidthRequest="30"
                                                HeightRequest="30"
                                                CornerRadius="15"/>
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </StackLayout>
            </Frame>

            <!-- Notes -->
            <Label Text="Notes" Style="{StaticResource SubHeadline}"/>
            <Editor x:Name="NotesEditor" Placeholder="Additional notes" 
                    Text="{Binding Job.Notes}" HeightRequest="80"/>

            <!-- Urgent Flag -->
            <StackLayout Orientation="Horizontal">
                <CheckBox x:Name="UrgentCheckBox" IsChecked="{Binding Job.IsUrgent}"/>
                <Label Text="Mark as urgent" VerticalOptions="Center" Margin="10,0,0,0"/>
            </StackLayout>

            <!-- Buttons -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Margin="0,20,0,0">
                <Button Text="Save" 
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="White"
                        WidthRequest="120"
                        Margin="10,0"
                        Clicked="OnSaveClicked"/>
                <Button Text="Cancel" 
                        BackgroundColor="Gray"
                        TextColor="White"
                        WidthRequest="120"
                        Margin="10,0"
                        Clicked="OnCancelClicked"/>
            </StackLayout>
        </StackLayout>
    </ScrollView>

</ContentPage> 